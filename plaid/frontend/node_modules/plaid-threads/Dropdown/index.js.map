{"version":3,"file":"index.js","sources":["../../src/Dropdown/index.tsx"],"sourcesContent":["import React from 'react';\nimport cx from 'classnames';\n\nimport Touchable from '../Touchable';\nimport Checkmark from '../Icons/Checkmark';\n\nimport styles from './Dropdown.module.scss';\n\nexport interface DropdownItem {\n  label: string;\n  value: string;\n}\n\ninterface Props {\n  block?: boolean;\n  children?: Array<React.ReactElement>;\n  className?: Parameters<typeof cx>[0];\n  isOpen: boolean;\n  onChange?: (v: DropdownItem) => void;\n  onEscape?: () => void;\n  options?: Array<DropdownItem>;\n  target: React.ReactNode;\n  value?: DropdownItem;\n  wrapperClassName?: Parameters<typeof cx>[0];\n}\n\nexport const Dropdown: React.FC<Props> = ({\n  block,\n  children,\n  className,\n  isOpen,\n  onChange,\n  onEscape,\n  options,\n  target,\n  value,\n  wrapperClassName,\n}) => {\n  const ref = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (isOpen && onEscape) {\n      const clickOutsideHandler = (event: MouseEvent) => {\n        if (\n          ref.current &&\n          event.target instanceof Node &&\n          !ref.current.contains(event.target)\n        ) {\n          onEscape();\n        }\n      };\n      document.addEventListener('click', clickOutsideHandler);\n\n      const escapeKeyHandler = (event: KeyboardEvent) => {\n        if (event.keyCode === 27) {\n          onEscape();\n        }\n      };\n      document.addEventListener('keyup', escapeKeyHandler);\n\n      return () => {\n        document.removeEventListener('click', clickOutsideHandler);\n        document.removeEventListener('keyup', escapeKeyHandler);\n      };\n    }\n\n    return () => {};\n  }, [isOpen, onEscape]);\n\n  return (\n    <div\n      className={cx(\n        styles.dropdownWrapper,\n        block && styles.block,\n        wrapperClassName,\n      )}\n      ref={ref}\n    >\n      {target}\n      <div\n        role='dialog'\n        className={cx(styles.dropdown, isOpen && styles.isOpen, className)}\n      >\n        <ul className={styles.list}>\n          {options &&\n            !children &&\n            options.map((o, idx) => (\n              <li className={styles.item} key={idx}>\n                <Touchable\n                  className={styles.touchable}\n                  onClick={() => onChange && onChange(o)}\n                >\n                  {o.label}\n                  {value && value.value === o.value && <Checkmark />}\n                </Touchable>\n              </li>\n            ))}\n          {children &&\n            !options &&\n            children.map(c => (\n              <li className={styles.item}>\n                {React.cloneElement(c, {\n                  className: cx(styles.touchable, c.props.className),\n                })}\n              </li>\n            ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nDropdown.displayName = 'Dropdown';\nexport default Dropdown;\nexport { styles };\n"],"names":["Dropdown","_a","block","children","className","isOpen","onChange","onEscape","options","target","value","wrapperClassName","ref","React","useRef","useEffect","clickOutsideHandler_1","event","current","Node","contains","document","addEventListener","escapeKeyHandler_1","keyCode","removeEventListener","cx","styles","dropdownWrapper","role","dropdown","list","map","o","idx","item","key","Touchable","touchable","onClick","label","Checkmark","c","cloneElement","props","displayName"],"mappings":"82GA0BaA,SAA4B,SAACC,OACxCC,UACAC,aACAC,cACAC,WACAC,aACAC,aACAC,YACAC,WACAC,UACAC,qBAEMC,EAAMC,eAAMC,OAAuB,MA+BzC,OA7BAD,eAAME,WAAU,WACd,GAAIV,GAAUE,EAAU,CACtB,IAAMS,EAAsB,SAACC,GAEzBL,EAAIM,SACJD,EAAMR,kBAAkBU,OACvBP,EAAIM,QAAQE,SAASH,EAAMR,SAE5BF,KAGJc,SAASC,iBAAiB,QAASN,GAEnC,IAAMO,EAAmB,SAACN,GACF,KAAlBA,EAAMO,SACRjB,KAKJ,OAFAc,SAASC,iBAAiB,QAASC,GAE5B,WACLF,SAASI,oBAAoB,QAAST,GACtCK,SAASI,oBAAoB,QAASF,IAI1C,OAAO,eACN,CAAClB,EAAQE,IAGVM,oCACET,UAAWsB,GACTC,OAAOC,gBACP1B,GAASyB,OAAOzB,MAChBS,GAEFC,IAAKA,GAEJH,EACDI,oCACEgB,KAAK,SACLzB,UAAWsB,GAAGC,OAAOG,SAAUzB,GAAUsB,OAAOtB,OAAQD,IAExDS,mCAAIT,UAAWuB,OAAOI,MACnBvB,IACEL,GACDK,EAAQwB,KAAI,SAACC,EAAGC,GAAQ,OACtBrB,mCAAIT,UAAWuB,OAAOQ,KAAMC,IAAKF,GAC/BrB,6BAACwB,eACCjC,UAAWuB,OAAOW,UAClBC,QAAS,WAAM,OAAAjC,GAAYA,EAAS2B,KAEnCA,EAAEO,MACF9B,GAASA,EAAMA,QAAUuB,EAAEvB,OAASG,6BAAC4B,6BAI7CtC,IACEK,GACDL,EAAS6B,KAAI,SAAAU,GAAK,OAChB7B,mCAAIT,UAAWuB,OAAOQ,MACnBtB,eAAM8B,aAAaD,EAAG,CACrBtC,UAAWsB,GAAGC,OAAOW,UAAWI,EAAEE,MAAMxC,qBAU1DJ,SAAS6C,YAAc"}
{"version":3,"file":"index.js","sources":["../../src/SelectGroup/index.tsx"],"sourcesContent":["import React from 'react';\nimport cx from 'classnames';\n\nimport Button from '../Button';\n\nimport styles from './SelectGroup.module.scss';\n\n// We expose an API as close to the react-select API as possible, and even use its types\nexport interface SelectGroupOptionsType {\n  label: string;\n  value: any;\n  disabled?: boolean;\n}\n\ninterface CommonSelectGroupProps {\n  className?: Parameters<typeof cx>[0];\n  buttonClassName?: Parameters<typeof cx>[0];\n  unselectedButtonClassName?: Parameters<typeof cx>[0];\n  inline?: boolean;\n  labeledById?: string;\n  options: SelectGroupOptionsType[];\n  small?: boolean;\n  tabIndex?: number;\n}\n\nexport interface SingleSelectGroupProps extends CommonSelectGroupProps {\n  multi?: false;\n  value: SelectGroupOptionsType | null | undefined;\n  onChange: (value: SelectGroupOptionsType) => void;\n}\n\nexport interface MultiSelectGroupProps extends CommonSelectGroupProps {\n  multi: true;\n  value: SelectGroupOptionsType[] | null | undefined;\n  onChange: (value: SelectGroupOptionsType[]) => void;\n}\n\ntype Props = SingleSelectGroupProps | MultiSelectGroupProps;\n\nconst isMultiOptionSelected = (\n  value: MultiSelectGroupProps['value'],\n  option: SelectGroupOptionsType,\n): boolean =>\n  value != null && Boolean(value.find(v => option.value === v.value));\n\nconst isSingleOptionSelected = (\n  value: SingleSelectGroupProps['value'],\n  option: SelectGroupOptionsType,\n): boolean => value != null && option.value === value.value;\n\nconst multiOptionOnClick = (\n  value: MultiSelectGroupProps['value'],\n  option: SelectGroupOptionsType,\n  selected: boolean,\n  onChange: MultiSelectGroupProps['onChange'],\n) => () =>\n  value != null && selected\n    ? // filter out option from current value as its being unselected\n      onChange(value.filter(v => v.value !== option.value))\n    : // concat option to current value\n      onChange(value != null ? [...value, option] : [option]);\n\nconst singleOptionOnClick = (\n  option: SelectGroupOptionsType,\n  selected: boolean,\n  onChange: SingleSelectGroupProps['onChange'],\n) => () => (selected ? null : onChange(option));\n\n// you lose some type checking when destructuring props that are an intersection type\n// https://github.com/Microsoft/TypeScript/issues/27927#issuecomment-442921711\nexport const SelectGroup: React.FC<Props> = props => (\n  <div\n    role={props.multi ? 'group' : 'radiogroup'}\n    aria-labelledby={props.labeledById}\n    className={cx(styles.selectGroup, props.className)}\n  >\n    {props.options.map((option, i) => {\n      const selected =\n        props.multi === true\n          ? isMultiOptionSelected(props.value, option)\n          : isSingleOptionSelected(props.value, option);\n      const onClick =\n        props.multi === true\n          ? multiOptionOnClick(props.value, option, selected, props.onChange)\n          : singleOptionOnClick(option, selected, props.onChange);\n      return (\n        <Button\n          key={i}\n          role={props.multi ? 'checkbox' : 'radio'}\n          ariaChecked={selected}\n          tabIndex={props.tabIndex != null ? props.tabIndex + i : undefined}\n          className={cx(\n            styles.selectGroupItem,\n            !props.inline && !props.multi && styles.selectGroupItemFlex,\n            props.multi && styles.selectGroupItemMulti,\n            props.buttonClassName,\n            !selected && props.unselectedButtonClassName,\n          )}\n          onClick={onClick}\n          secondary={!selected}\n          disabled={option.disabled}\n          centered\n          inline={props.multi || props.inline}\n          small={props.multi || props.small}\n        >\n          {option.label}\n        </Button>\n      );\n    })}\n  </div>\n);\n\nSelectGroup.displayName = 'SelectGroup';\nexport default SelectGroup;\nexport { styles };\n"],"names":["isMultiOptionSelected","value","option","Boolean","find","v","isSingleOptionSelected","multiOptionOnClick","selected","onChange","filter","singleOptionOnClick","SelectGroup","props","React","role","multi","labeledById","className","cx","styles","selectGroup","options","map","i","onClick","Button","key","ariaChecked","tabIndex","undefined","selectGroupItem","inline","selectGroupItemFlex","selectGroupItemMulti","buttonClassName","unselectedButtonClassName","secondary","disabled","centered","small","label","displayName"],"mappings":"w6CAuCA,IAAMA,sBAAwB,SAC5BC,EACAC,GAEA,OAAS,MAATD,GAAiBE,QAAQF,EAAMG,MAAK,SAAAC,GAAK,OAAAH,EAAOD,QAAUI,EAAEJ,WAExDK,uBAAyB,SAC7BL,EACAC,GACY,OAAS,MAATD,GAAiBC,EAAOD,QAAUA,EAAMA,OAEhDM,mBAAqB,SACzBN,EACAC,EACAM,EACAC,GACG,OAAA,WACH,OAEIA,EAFK,MAATR,GAAiBO,EAEJP,EAAMS,QAAO,SAAAL,GAAK,OAAAA,EAAEJ,QAAUC,EAAOD,SAE5B,MAATA,wBAAoBA,GAAOC,IAAU,CAACA,MAE/CS,oBAAsB,SAC1BT,EACAM,EACAC,GACG,OAAA,WAAM,OAACD,EAAW,KAAOC,EAASP,KAI1BU,YAA+B,SAAAC,GAAS,OACnDC,oCACEC,KAAMF,EAAMG,MAAQ,QAAU,+BACbH,EAAMI,YACvBC,UAAWC,GAAGC,OAAOC,YAAaR,EAAMK,YAEvCL,EAAMS,QAAQC,KAAI,SAACrB,EAAQsB,GAC1B,IAAMhB,GACY,IAAhBK,EAAMG,MACFhB,sBAAsBa,EAAMZ,MAAOC,GACnCI,uBAAuBO,EAAMZ,MAAOC,GACpCuB,GACY,IAAhBZ,EAAMG,MACFT,mBAAmBM,EAAMZ,MAAOC,EAAQM,EAAUK,EAAMJ,UACxDE,oBAAoBT,EAAQM,EAAUK,EAAMJ,UAClD,OACEK,6BAACY,iBACCC,IAAKH,EACLT,KAAMF,EAAMG,MAAQ,WAAa,QACjCY,YAAapB,EACbqB,SAA4B,MAAlBhB,EAAMgB,SAAmBhB,EAAMgB,SAAWL,OAAIM,EACxDZ,UAAWC,GACTC,OAAOW,iBACNlB,EAAMmB,SAAWnB,EAAMG,OAASI,OAAOa,oBACxCpB,EAAMG,OAASI,OAAOc,qBACtBrB,EAAMsB,iBACL3B,GAAYK,EAAMuB,2BAErBX,QAASA,EACTY,WAAY7B,EACZ8B,SAAUpC,EAAOoC,SACjBC,YACAP,OAAQnB,EAAMG,OAASH,EAAMmB,OAC7BQ,MAAO3B,EAAMG,OAASH,EAAM2B,OAE3BtC,EAAOuC,YAOlB7B,YAAY8B,YAAc"}